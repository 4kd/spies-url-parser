function parse_url(e){var r=e.split("?")[1],a=r.split("&");return a.reduce(function(e,r){var a=r.split("=")[0],t=r.split("=")[1];return e[a]=t,e},{})}function make_birthday(e){var r=new Date,a=r.getFullYear()-parseInt(e,10),t=r.getMonth(),s=r.getDate();return""+a+"-"+t+"-"+s}function parse_date_string(e){var r=e.slice(0,4),a=e.slice(4,6),t=e.slice(6,8);return""+r+"-"+a+"-"+t}function parse_passenger_mix(e){var r=e.replace("|","").split(","),a={passengers:[],adults:0,children:0};return r.forEach(function(e){e>17?a.adults+=1:a.children+=1,a.passengers.push(make_birthday(e))}),a}function departure_airport_name(e){var r="";switch(e){case 12678:r="København - CPH";break;case 12676:r="Billund - BLL";break;case 12675:r="Aalborg - AAL";break;case 37057:r="Odense - ODE";break;case 12677:r="Rønne - RNN";break;default:r="København - CPH"}return r}function spies_url_parser(e){if(!e||e.indexOf("QueryDepID")===-1||e.indexOf("QueryRoomAges")===-1)return{};var r=parse_url(e);return{departure_airport:departure_airport_name(parseInt(r.QueryDepID,10)),pax_mix:parse_passenger_mix(r.QueryRoomAges),duration_days:r.QueryDur,departure_date:parse_date_string(r.QueryDepDate),destination:r.QueryCtryID+","+r.QueryAreaID}}"undefined"!=typeof module&&module.exports&&(module.exports=spies_url_parser,module.exports.parse_url=parse_url,module.exports.make_birthday=make_birthday,module.exports.parse_passenger_mix=parse_passenger_mix,module.exports.parse_date_string=parse_date_string,module.exports.departure_airport_name=departure_airport_name);
